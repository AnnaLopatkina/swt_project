<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">

    <link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">

    <title>Räume</title>
</head>
<body>
<nav th:replace="fragments :: navigation"></nav>

<div class="container mt-md-5">
    <h1 th:text="#{rooms}">Räume</h1>


    <form method="post" th:object="${form}" th:action="@{/rooms/add}">
        <div class="form-group">
            <label for="nameInput" th:text="#{rooms.names}">Raumname</label>
            <input th:field="*{name}" type="text" class="form-control" id="nameInput"
                   th:placeholder="#{rooms.names.enter}">
            <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="alert alert-danger" role="alert"></div>
        </div>
        <button class="btn btn-warning" type="submit" th:text="#{rooms.add.submit}">Hinzufügen</button>
    </form>
    <br>


    <ul class="list-group" sec:authorize="hasRole('ADMIN')" th:each="room : ${rooms}">
        <li class="list-group-item" th:text="${room.name}"></li>
        <li class="list-group-item">
            <div class="btn-toolbar">
                <form method="post" th:action="@{/rooms/{room}/delete(room=${room.id})}">
                    <button class="btn btn-danger" th:text="#{rooms.delete}">Raum löschen</button>
                </form>

            </div>
        </li>
    </ul>

    <br>
    <h2 th:text="#{rooms.timetable}">Belegplan (heute)</h2>

    <div>
        <table class="table-striped table" th:action="@{/rooms}">
            <thead>
            <tr>
                <th th:text="#{rooms.times}"></th>
                <th th:text="${room.getName()}" th:each="room : ${rooms}">Raum</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="row, iter: ${slotTable}">
                <td th:text="${times.get(iter.index).getFirst()} + ' - ' + ${times.get(iter.index).getSecond()}">
                    vonbis
                </td>
                <td th:each="field: ${row}">
                    <div th:if="${field}">
                        <a th:href="@{/orders/detail/{id}(id=${field.getOrder().getId()})}"
                           th:text="${field.getOrder().getId()}">efe3-2daee3-adede3</a>
                        <div>
                            <span class="font-weight-bold" th:text="${field.getStaff().getFirstName()}">Elon</span>
                            <span class="font-weight-bold" th:text="${field.getStaff().getLastName()}">Musk</span>
                        </div>
                    </div>
                    <div th:unless="${field}">
                        <span>-</span>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>

    </div>

    <footer th:replace="fragments :: footer"></footer>

    <script crossorigin="anonymous"
            src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            th:src="@{/webjars/jquery/jquery.js}"></script>
    <script crossorigin="anonymous"
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            th:src="@{/webjars/popper.js/umd/popper.js}"></script>
    <script crossorigin="anonymous"
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
</body>
</html>